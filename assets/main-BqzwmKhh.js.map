{"version":3,"file":"main-BqzwmKhh.js","sources":["../../src/main.js"],"sourcesContent":["// СТРАНИЦА ВИДЕО\n// ПОИСК\ndocument\n  .querySelector('.header__search-input')\n  .addEventListener('input', function () {\n    const loadIcon = document.querySelector('.header__search-load');\n    const closeIcon = document.querySelector('.header__search-close');\n    const resultList = document.querySelector('.header-search__result-list');\n\n    if (this.value.length > 0) {\n      // Показать блок загрузки\n      loadIcon.style.display = 'block';\n      closeIcon.style.display = 'none';\n      resultList.style.display = 'none';\n\n      // Через 2 секунды скрыть блок загрузки и показать блок с результатами и кнопку закрытия\n      setTimeout(() => {\n        loadIcon.style.display = 'none';\n        closeIcon.style.display = 'block';\n        resultList.style.display = 'block';\n      }, 500);\n    } else {\n      // Если поле ввода пустое, скрыть все блоки\n      loadIcon.style.display = 'none';\n      closeIcon.style.display = 'none';\n      resultList.style.display = 'none';\n    }\n  });\n\ndocument\n  .querySelector('.header__search-close')\n  .addEventListener('click', function () {\n    const input = document.querySelector('.header__search-input');\n    const closeIcon = document.querySelector('.header__search-close');\n    const resultList = document.querySelector('.header-search__result-list');\n\n    // Очистка поля ввода\n    input.value = '';\n\n    // Скрыть блоки\n    closeIcon.style.display = 'none';\n    resultList.style.display = 'none';\n  });\n\n// VIDEO PAGE SCROLL\ndocument.addEventListener('DOMContentLoaded', function () {\n  const videos = document.querySelectorAll('.video-main__video');\n  function pauseAllVideos() {\n    videos.forEach(video => {\n      video.pause();\n    });\n  }\n  function playVisibleVideo() {\n    videos.forEach(video => {\n      const rect = video.getBoundingClientRect();\n      const inView = rect.top >= 0 && rect.bottom <= window.innerHeight;\n      if (inView) {\n        video.play();\n      } else {\n        video.pause();\n      }\n    });\n  }\n  // Initial check to pause all videos except the one in view\n  playVisibleVideo();\n  // Add event listener for scrolling\n  window.addEventListener('scroll', playVisibleVideo);\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const posts = document.querySelectorAll('.video-main__item');\n\n  posts.forEach(post => {\n    const likeButton = post.querySelector('.video__btn');\n    const likeText = post.querySelector('.video__btn-span-text');\n    const likesContainer = post.querySelector('.video__likes');\n    const heartsContainer = post.querySelector('.video__hearts');\n\n    likeButton.addEventListener('click', () => {\n      const hearts = post.querySelectorAll('.video-heart');\n\n      if (post.classList.contains('liked')) {\n        // Remove like\n        post.classList.remove('liked');\n        likesContainer.classList.remove('active');\n        likeText.textContent = 'Голосовать';\n\n        // Remove hearts animation by clearing inline styles\n        hearts.forEach(heart => {\n          heart.style.animation = 'none';\n        });\n\n        // Hide the hearts container\n        heartsContainer.style.display = 'none';\n      } else {\n        // Add like\n        post.classList.add('liked');\n        likesContainer.classList.add('active');\n        likeText.textContent = 'Голос принят';\n\n        // Show the hearts container and start animation\n        heartsContainer.style.display = 'flex';\n        hearts.forEach((heart, index) => {\n          const offsetX = Math.random() * 100 - 10;\n          heart.style.setProperty('--offset-x', `${offsetX}px`);\n          heart.style.animation = `heartAnimation 3s forwards`;\n          heart.style.animationDelay = `${index * 0.3}s`;\n        });\n      }\n    });\n  });\n});\n\n//popup share show/hide\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const shareButtons = document.querySelectorAll('.js-video__share');\n  const popups = document.querySelectorAll('.js-share-popup');\n\n  function handleShareButtonClick(e, shareButton, popup, index) {\n    e.preventDefault();\n    const windowWidth = window.innerWidth;\n\n    if (windowWidth > 991) {\n      // Desktop behavior: toggle the popup visibility\n      popup.classList.toggle('active');\n      shareButton.classList.toggle('active');\n\n      // Close other popups if open\n      popups.forEach((p, i) => {\n        if (i !== index && p.classList.contains('active')) {\n          p.classList.remove('active');\n          shareButtons[i].classList.remove('active');\n        }\n      });\n    } else {\n      // Mobile behavior: typical share button action\n      // Here you could trigger the native share dialog (if supported) or redirect to a share URL\n      window.open('https://your-share-url.com', '_blank'); // Example URL, replace with your logic\n    }\n  }\n\n  shareButtons.forEach((shareButton, index) => {\n    const popup = popups[index];\n\n    shareButton.addEventListener('click', e =>\n      handleShareButtonClick(e, shareButton, popup, index)\n    );\n  });\n\n  // Hide popup when clicking outside of it (desktop only)\n  document.addEventListener('click', e => {\n    const windowWidth = window.innerWidth;\n\n    if (windowWidth > 991) {\n      if (\n        !e.target.closest('.js-video__share') &&\n        !e.target.closest('.js-share-popup')\n      ) {\n        popups.forEach((popup, index) => {\n          if (popup.classList.contains('active')) {\n            popup.classList.remove('active');\n            shareButtons[index].classList.remove('active');\n          }\n        });\n      }\n    }\n  });\n\n  // Re-run the logic if the window is resized\n  window.addEventListener('resize', () => {\n    popups.forEach(popup => popup.classList.remove('active'));\n    shareButtons.forEach(button => button.classList.remove('active'));\n  });\n});\n\n//COPY LINK\ndocument.addEventListener('DOMContentLoaded', () => {\n  const copyButtons = document.querySelectorAll('.js-copy-btn');\n\n  copyButtons.forEach(button => {\n    button.addEventListener('click', function () {\n      const inputField = this.closest('.share-popup').querySelector(\n        '.js-share-popup-input'\n      );\n      inputField.select();\n      inputField.setSelectionRange(0, 99999); // For mobile devices\n      navigator.clipboard.writeText(inputField.value);\n\n      const tooltip = this.querySelector('.tooltiptext');\n      tooltip.textContent = 'скопировано: ' + inputField.value;\n      tooltip.classList.add('active');\n    });\n\n    button.addEventListener('mouseout', function () {\n      const tooltip = this.querySelector('.tooltiptext');\n      tooltip.textContent = 'Копировать ссылку';\n      tooltip.classList.remove('active');\n    });\n  });\n});\n\nconst controls = `\n    <button type=\"button\" class=\"plyr__control plyr__control--overlaid\" data-plyr=\"play\" aria-pressed=\"false\" aria-label=\"Play\"><svg aria-hidden=\"true\" focusable=\"false\"><use xlink:href=\"#plyr-play\"></use></svg><span class=\"plyr__sr-only\">Play</span></button>\n\n<div class=\"plyr__controls\">\n    \n        <div class=\"plyr__progress\">\n        <input data-plyr=\"seek\" type=\"range\" min=\"0\" max=\"100\" step=\"0.01\" value=\"0\" aria-label=\"Seek\">\n        <progress class=\"plyr__progress__buffer\" min=\"0\" max=\"100\" value=\"0\">% buffered</progress>\n        <span role=\"tooltip\" class=\"plyr__tooltip\">00:00</span>\n    </div>\n    \n    <button type=\"button\" class=\"plyr__control\" aria-label=\"Play, {title}\" data-plyr=\"play\">\n        <svg class=\"icon--pressed\" role=\"presentation\" width=\"9\" height=\"12\" viewBox=\"0 0 9 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M1.57373 1L1.57373 11\" stroke=\"#FF0199\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n  <path d=\"M7.57373 1L7.57373 11\" stroke=\"#FF0199\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n</svg>\n        <svg class=\"icon--not-pressed\" role=\"presentation\" width=\"20\" height=\"23\" viewBox=\"0 0 20 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M19.1798 10.0247C20.1197 10.5674 20.1197 11.9241 19.1798 12.4668L2.40958 22.1491C1.46962 22.6918 0.294679 22.0134 0.294679 20.9281L0.294679 1.56351C0.29468 0.478141 1.46962 -0.200213 2.40958 0.34247L19.1798 10.0247Z\" fill=\"#FF0199\" />\n</svg>\n        \n    </button>\n    \n    <div style=\"display: flex\"><div class=\"plyr__time plyr__time--current\" aria-label=\"Current time\">00:00</div>\n    <div class=\"plyr__time plyr__time--duration\" aria-label=\"Duration\">00:00</div></div>\n   </div>\n\n</div>\n`;\n\n// Setup the player\nconst players = Array.from(document.querySelectorAll('.js-player')).map(\n  p => new Plyr(p)\n);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const plyrElements = document.querySelectorAll('.plyr');\n\n  plyrElements.forEach(plyrElement => {\n    const videoBottom = plyrElement\n      .closest('.video-main__item-cover')\n      .querySelector('.video__bottom');\n\n    // Создаем наблюдатель за изменениями атрибутов (классов) у каждого элемента plyrElement\n    const observer = new MutationObserver(function (mutationsList) {\n      mutationsList.forEach(mutation => {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'class'\n        ) {\n          if (plyrElement.classList.contains('plyr--hide-controls')) {\n            videoBottom.classList.remove('up');\n          } else {\n            videoBottom.classList.add('up');\n          }\n        }\n      });\n    });\n\n    observer.observe(plyrElement, { attributes: true });\n\n    // Очищаем наблюдатель при выходе с страницы или завершении работы\n    window.addEventListener('unload', function () {\n      observer.disconnect();\n    });\n  });\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  const windowWidth = window.innerWidth;\n\n  const openFuckingFormButton = document.querySelector('.header__form');\n  // const closeFuckingForm = document.querySelector('');\n  if (windowWidth < 991) {\n    openFuckingFormButton.addEventListener('click', function () {\n      this.classList.add('ouvert');\n    });\n  }\n});\n"],"names":["loadIcon","closeIcon","resultList","input","videos","playVisibleVideo","video","rect","post","likeButton","likeText","likesContainer","heartsContainer","hearts","heart","index","offsetX","shareButtons","popups","handleShareButtonClick","e","shareButton","popup","p","i","button","inputField","tooltip","plyrElement","videoBottom","observer","mutationsList","mutation","windowWidth","openFuckingFormButton"],"mappings":"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"}